<procedure>
      <procedureName>MakeCopyForDevelopment</procedureName>
      <description>This procedure will create a copy of this project, fixing up any self-referential property values. The new project name will be &lt;this-project-name&gt;-&lt;projectNameSuffix&gt;
All steps in this job must run on the 'local' resource.</description>
      <jobNameTemplate/>
      <resourceName>local</resourceName>
      <timeLimit/>
      <timeLimitUnits>seconds</timeLimitUnits>
      <workspaceName/>
      <acl>
        <inheriting>1</inheriting>
      </acl>
      <propertySheet>
        <acl>
          <inheriting>1</inheriting>
        </acl>
        <property>
          <propertyName>ec_customEditorData</propertyName>
          <propertySheet>
            <acl>
              <inheriting>1</inheriting>
            </acl>
            <property>
              <propertyName>parameters</propertyName>
              <propertySheet>
                <acl>
                  <inheriting>1</inheriting>
                </acl>
                <property>
                  <propertyName>createHomePageLink</propertyName>
                  <propertySheet>
                    <acl>
                      <inheriting>1</inheriting>
                    </acl>
                    <property>
                      <propertyName>checkedValue</propertyName>
                      <expandable>1</expandable>
                      <value>true</value>
                    </property>
                    <property>
                      <propertyName>formType</propertyName>
                      <expandable>1</expandable>
                      <value>standard</value>
                    </property>
                    <property>
                      <propertyName>initiallyChecked</propertyName>
                      <expandable>1</expandable>
                      <value>1</value>
                    </property>
                    <property>
                      <propertyName>uncheckedValue</propertyName>
                      <expandable>1</expandable>
                      <value>false</value>
                    </property>
                  </propertySheet>
                </property>
                <property>
                  <propertyName>overwriteExistingProject</propertyName>
                  <propertySheet>
                    <acl>
                      <inheriting>1</inheriting>
                    </acl>
                    <property>
                      <propertyName>checkedValue</propertyName>
                      <expandable>1</expandable>
                      <value>true</value>
                    </property>
                    <property>
                      <propertyName>formType</propertyName>
                      <expandable>1</expandable>
                      <value>standard</value>
                    </property>
                    <property>
                      <propertyName>initiallyChecked</propertyName>
                      <expandable>1</expandable>
                      <value>0</value>
                    </property>
                    <property>
                      <propertyName>uncheckedValue</propertyName>
                      <expandable>1</expandable>
                      <value>false</value>
                    </property>
                  </propertySheet>
                </property>
                <property>
                  <propertyName>projectNameSuffix</propertyName>
                  <propertySheet>
                    <acl>
                      <inheriting>1</inheriting>
                    </acl>
                    <property>
                      <propertyName>formType</propertyName>
                      <expandable>1</expandable>
                      <value>standard</value>
                    </property>
                  </propertySheet>
                </property>
                <property>
                  <propertyName>xxx</propertyName>
                  <propertySheet>
                    <acl>
                      <inheriting>1</inheriting>
                    </acl>
                    <property>
                      <propertyName>formType</propertyName>
                      <expandable>1</expandable>
                      <value>standard</value>
                    </property>
                  </propertySheet>
                </property>
              </propertySheet>
            </property>
          </propertySheet>
        </property>
      </propertySheet>
      <formalParameter>
        <formalParameterName>createHomePageLink</formalParameterName>
        <defaultValue>true</defaultValue>
        <description>If selected, a link to the newly created project will be created on the user's homepage</description>
        <expansionDeferred>0</expansionDeferred>
        <required>1</required>
        <type>checkbox</type>
      </formalParameter>
      <formalParameter>
        <formalParameterName>overwriteExistingProject</formalParameterName>
        <defaultValue>false</defaultValue>
        <description/>
        <expansionDeferred>0</expansionDeferred>
        <required>1</required>
        <type>checkbox</type>
      </formalParameter>
      <formalParameter>
        <formalParameterName>projectNameSuffix</formalParameterName>
        <defaultValue/>
        <description>This is appended to the name of the project being copied to form the new project name. For example, a project named Fred will become Fred-[projectNameSuffix].</description>
        <expansionDeferred>0</expansionDeferred>
        <required>1</required>
        <type>entry</type>
      </formalParameter>
      <step>
        <stepName>exportProjectXml</stepName>
        <alwaysRun>0</alwaysRun>
        <broadcast>0</broadcast>
        <condition/>
        <description/>
        <errorHandling>abortProcedureNow</errorHandling>
        <exclusiveMode>none</exclusiveMode>
        <parallel>0</parallel>
        <precondition/>
        <releaseMode>none</releaseMode>
        <resourceName/>
        <subprocedure>x_ExportSpecifiedProjectToXml</subprocedure>
        <subproject>PROJECT-NAME-MAJOR.MINOR</subproject>
        <timeLimit/>
        <timeLimitUnits>minutes</timeLimitUnits>
        <workspaceName/>
        <acl>
          <inheriting>1</inheriting>
        </acl>
        <actualParameters>
          <acl>
            <inheriting>1</inheriting>
          </acl>
          <property>
            <propertyName>destinationFile</propertyName>
            <expandable>1</expandable>
            <value>$[/myProcedure/procedureName]-project.xml</value>
          </property>
          <property>
            <propertyName>exportProjectName</propertyName>
            <expandable>1</expandable>
            <value>$[/myProject/projectName]</value>
          </property>
          <property>
            <propertyName>workingDirectoryToUse</propertyName>
            <expandable>1</expandable>
            <value>.</value>
          </property>
        </actualParameters>
        <propertySheet>
          <acl>
            <inheriting>1</inheriting>
          </acl>
          <property>
            <propertyName>ec_customEditorData</propertyName>
            <propertySheet>
              <acl>
                <inheriting>1</inheriting>
              </acl>
              <property>
                <propertyName>formType</propertyName>
                <expandable>1</expandable>
                <value>procedure</value>
              </property>
            </propertySheet>
          </property>
        </propertySheet>
      </step>
      <step>
        <stepName>setNameOfNewProject</stepName>
        <alwaysRun>0</alwaysRun>
        <broadcast>0</broadcast>
        <commandPlaceholder>This command has been copied to an external file</commandPlaceholder>
        <condition/>
        <description/>
        <errorHandling>abortProcedure</errorHandling>
        <exclusiveMode>none</exclusiveMode>
        <logFileName/>
        <parallel>0</parallel>
        <postProcessor/>
        <precondition/>
        <releaseMode>none</releaseMode>
        <resourceName/>
        <shell>ec-ruby</shell>
        <timeLimit/>
        <timeLimitUnits>minutes</timeLimitUnits>
        <workingDirectory/>
        <workspaceName/>
        <acl>
          <inheriting>1</inheriting>
        </acl>
        <propertySheet>
          <acl>
            <inheriting>1</inheriting>
          </acl>
          <property>
            <propertyName>ec_customEditorData</propertyName>
            <propertySheet>
              <acl>
                <inheriting>1</inheriting>
              </acl>
              <property>
                <propertyName>formType</propertyName>
                <expandable>1</expandable>
                <value>command</value>
              </property>
            </propertySheet>
          </property>
        </propertySheet>
      </step>
      <step>
        <stepName>replaceSelfReferencesInProjectXml</stepName>
        <alwaysRun>0</alwaysRun>
        <broadcast>0</broadcast>
        <commandPlaceholder>This command has been copied to an external file</commandPlaceholder>
        <condition/>
        <description/>
        <errorHandling>abortProcedure</errorHandling>
        <exclusiveMode>none</exclusiveMode>
        <logFileName/>
        <parallel>0</parallel>
        <postProcessor/>
        <releaseMode>none</releaseMode>
        <resourceName/>
        <shell/>
        <timeLimit/>
        <timeLimitUnits>minutes</timeLimitUnits>
        <workingDirectory/>
        <workspaceName/>
        <acl>
          <inheriting>1</inheriting>
        </acl>
        <propertySheet>
          <acl>
            <inheriting>1</inheriting>
          </acl>
          <property>
            <propertyName>ec_customEditorData</propertyName>
            <propertySheet>
              <acl>
                <inheriting>1</inheriting>
              </acl>
              <property>
                <propertyName>formType</propertyName>
                <expandable>1</expandable>
                <value>command</value>
              </property>
            </propertySheet>
          </property>
        </propertySheet>
      </step>
      <step>
        <stepName>importProjectXml</stepName>
        <alwaysRun>0</alwaysRun>
        <broadcast>0</broadcast>
        <condition/>
        <description/>
        <errorHandling>abortProcedure</errorHandling>
        <exclusiveMode>none</exclusiveMode>
        <parallel>0</parallel>
        <precondition/>
        <releaseMode>none</releaseMode>
        <resourceName/>
        <subprocedure>x_ImportElectricCommanderProjectFromXml</subprocedure>
        <subproject>PROJECT-NAME-MAJOR.MINOR</subproject>
        <timeLimit/>
        <timeLimitUnits>minutes</timeLimitUnits>
        <workspaceName/>
        <acl>
          <inheriting>1</inheriting>
        </acl>
        <actualParameters>
          <acl>
            <inheriting>1</inheriting>
          </acl>
          <property>
            <propertyName>importProjectName</propertyName>
            <expandable>1</expandable>
            <value>$[newProjectName]</value>
          </property>
          <property>
            <propertyName>overwriteIfAlreadyExists</propertyName>
            <expandable>1</expandable>
            <value>$[overwriteExistingProject]</value>
          </property>
          <property>
            <propertyName>sourceFile</propertyName>
            <expandable>1</expandable>
            <value>$[/myProcedure/procedureName]-project.xml</value>
          </property>
          <property>
            <propertyName>workingDirectoryToUse</propertyName>
            <expandable>1</expandable>
            <value>.</value>
          </property>
        </actualParameters>
        <propertySheet>
          <acl>
            <inheriting>1</inheriting>
          </acl>
          <property>
            <propertyName>ec_customEditorData</propertyName>
            <propertySheet>
              <acl>
                <inheriting>1</inheriting>
              </acl>
              <property>
                <propertyName>formType</propertyName>
                <expandable>1</expandable>
                <value>procedure</value>
              </property>
            </propertySheet>
          </property>
        </propertySheet>
      </step>
      <step>
        <stepName>afterImportActions</stepName>
        <alwaysRun>0</alwaysRun>
        <broadcast>0</broadcast>
        <commandPlaceholder>This command has been copied to an external file</commandPlaceholder>
        <condition/>
        <description>This script performs actions after the import to make visible the new project and add a link to the Job page.</description>
        <errorHandling>abortProcedure</errorHandling>
        <exclusiveMode>none</exclusiveMode>
        <logFileName/>
        <parallel>0</parallel>
        <postProcessor/>
        <precondition/>
        <releaseMode>none</releaseMode>
        <resourceName/>
        <shell>ec-ruby</shell>
        <timeLimit/>
        <timeLimitUnits>minutes</timeLimitUnits>
        <workingDirectory/>
        <workspaceName/>
        <acl>
          <inheriting>1</inheriting>
        </acl>
        <propertySheet>
          <acl>
            <inheriting>1</inheriting>
          </acl>
          <property>
            <propertyName>ec_customEditorData</propertyName>
            <propertySheet>
              <acl>
                <inheriting>1</inheriting>
              </acl>
              <property>
                <propertyName>formType</propertyName>
                <expandable>1</expandable>
                <value>command</value>
              </property>
            </propertySheet>
          </property>
        </propertySheet>
      </step>
      <step>
        <stepName>runDeployRubyGems</stepName>
        <alwaysRun>0</alwaysRun>
        <broadcast>0</broadcast>
        <condition/>
        <description/>
        <errorHandling>abortProcedure</errorHandling>
        <exclusiveMode>none</exclusiveMode>
        <parallel>1</parallel>
        <precondition/>
        <releaseMode>none</releaseMode>
        <resourceName/>
        <subprocedure>x_RunProcedureAndWait</subprocedure>
        <subproject>PROJECT-NAME-MAJOR.MINOR</subproject>
        <timeLimit/>
        <timeLimitUnits>minutes</timeLimitUnits>
        <workspaceName/>
        <acl>
          <inheriting>1</inheriting>
        </acl>
        <actualParameters>
          <acl>
            <inheriting>1</inheriting>
          </acl>
          <property>
            <propertyName>additionalArgsToRunProcedure</propertyName>
            <expandable>1</expandable>
            <value/>
          </property>
          <property>
            <propertyName>expectedOutcome</propertyName>
            <expandable>1</expandable>
            <value>(success|warning)</value>
          </property>
          <property>
            <propertyName>ignoreMissingProcedureError</propertyName>
            <expandable>1</expandable>
            <value>false</value>
          </property>
          <property>
            <propertyName>procedureToRun</propertyName>
            <expandable>1</expandable>
            <value>DeployRubyGems</value>
          </property>
          <property>
            <propertyName>projectToRun</propertyName>
            <expandable>1</expandable>
            <value>$[/myJob/newProjectName]</value>
          </property>
          <property>
            <propertyName>subJobLinkName</propertyName>
            <expandable>1</expandable>
            <value>DeployRubyGems</value>
          </property>
        </actualParameters>
        <propertySheet>
          <acl>
            <inheriting>1</inheriting>
          </acl>
        </propertySheet>
      </step>
      <step>
        <stepName>grantPrivilegesToTestPlugin</stepName>
        <alwaysRun>0</alwaysRun>
        <broadcast>0</broadcast>
        <condition/>
        <description/>
        <errorHandling>failProcedure</errorHandling>
        <exclusiveMode>none</exclusiveMode>
        <parallel>1</parallel>
        <precondition/>
        <releaseMode>none</releaseMode>
        <resourceName/>
        <subprocedure>x_GrantPrivilegesToProject</subprocedure>
        <subproject>PROJECT-NAME-MAJOR.MINOR</subproject>
        <timeLimit/>
        <timeLimitUnits>minutes</timeLimitUnits>
        <workspaceName/>
        <acl>
          <inheriting>1</inheriting>
        </acl>
        <actualParameters>
          <acl>
            <inheriting>1</inheriting>
          </acl>
          <property>
            <propertyName>targetProjectName</propertyName>
            <expandable>1</expandable>
            <value>$[/myJob/newProjectName]</value>
          </property>
        </actualParameters>
        <propertySheet>
          <acl>
            <inheriting>1</inheriting>
          </acl>
        </propertySheet>
      </step>
      <step>
        <stepName>create-home-page-link</stepName>
        <alwaysRun>0</alwaysRun>
        <broadcast>0</broadcast>
        <condition>$[createHomePageLink]</condition>
        <description/>
        <errorHandling>failProcedure</errorHandling>
        <exclusiveMode>none</exclusiveMode>
        <parallel>1</parallel>
        <precondition/>
        <releaseMode>none</releaseMode>
        <resourceName/>
        <subprocedure>x_CreateHomePageLinkToProject</subprocedure>
        <subproject>PROJECT-NAME-MAJOR.MINOR</subproject>
        <timeLimit/>
        <timeLimitUnits>minutes</timeLimitUnits>
        <workspaceName/>
        <acl>
          <inheriting>1</inheriting>
        </acl>
        <actualParameters>
          <acl>
            <inheriting>1</inheriting>
          </acl>
          <property>
            <propertyName>linkToProject</propertyName>
            <expandable>1</expandable>
            <value>$[newProjectName]</value>
          </property>
        </actualParameters>
        <propertySheet>
          <acl>
            <inheriting>1</inheriting>
          </acl>
        </propertySheet>
      </step>
    </procedure>
